function print(element, level) {
  let content = "";
  let tabs = tab(level);

  if (element.type === "directive") return `<${element.data}>\n`;

  if (element.type === "comment") return `${tabs}<!-- ${element.data} -->\n`;

  if (element.type === "text")
    return tabs + element.data.split("").join("").replace(/\s+/g, " ") + "\n";

  if (element.type === "tag") {
    content += `${tabs}<${element.name}`;

    if (element.attribs && Object.keys(element.attribs).length !== 0)
      content += " " +
        Object.keys(element.attribs)
          .map((key, value) => `${key}="${element.attribs[key]}"`)
          .join(" ");

    if (element.voidElement !== true) content += ">\n";
  }

  if (element.voidElement) return content + "/>\n";

  if (element.children)
    content += element.children.map(e => print(e, level + 1)).join("");

  if (element.type === "tag") content += `${tabs}</${element.name}>\n`;
  return content;
}

function tab(level) {
  if (level > 0) return "  " + tab(level - 1);

  return "";
}

module.exports = print;
